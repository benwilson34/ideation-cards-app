var t={505:t=>{function e(t,e,n){t instanceof RegExp&&(t=s(t,n)),e instanceof RegExp&&(e=s(e,n));var r=i(t,e,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+t.length,r[1]),post:n.slice(r[1]+e.length)}}function s(t,e){var s=e.match(t);return s?s[0]:null}function i(t,e,s){var i,n,r,o,a,h=s.indexOf(t),l=s.indexOf(e,h+1),c=h;if(h>=0&&l>0){if(t===e)return[h,l];for(i=[],r=s.length;c>=0&&!a;)c==h?(i.push(c),h=s.indexOf(t,c+1)):1==i.length?a=[i.pop(),l]:((n=i.pop())<r&&(r=n,o=l),l=s.indexOf(e,c+1)),c=h<l&&h>=0?h:l;i.length&&(a=[r,o])}return a}t.exports=e,e.range=i},928:(t,e,s)=>{var i=s(505);t.exports=function(t){return t?("{}"===t.substr(0,2)&&(t="\\{\\}"+t.substr(2)),m(function(t){return t.split("\\\\").join(n).split("\\{").join(r).split("\\}").join(o).split("\\,").join(a).split("\\.").join(h)}(t),!0).map(c)):[]};var n="\0SLASH"+Math.random()+"\0",r="\0OPEN"+Math.random()+"\0",o="\0CLOSE"+Math.random()+"\0",a="\0COMMA"+Math.random()+"\0",h="\0PERIOD"+Math.random()+"\0";function l(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function c(t){return t.split(n).join("\\").split(r).join("{").split(o).join("}").split(a).join(",").split(h).join(".")}function u(t){if(!t)return[""];var e=[],s=i("{","}",t);if(!s)return t.split(",");var n=s.pre,r=s.body,o=s.post,a=n.split(",");a[a.length-1]+="{"+r+"}";var h=u(o);return o.length&&(a[a.length-1]+=h.shift(),a.push.apply(a,h)),e.push.apply(e,a),e}function d(t){return"{"+t+"}"}function p(t){return/^-?0\d/.test(t)}function f(t,e){return t<=e}function g(t,e){return t>=e}function m(t,e){var s=[],n=i("{","}",t);if(!n)return[t];var r=n.pre,a=n.post.length?m(n.post,!1):[""];if(/\$$/.test(n.pre))for(var h=0;h<a.length;h++){var c=r+"{"+n.body+"}"+a[h];s.push(c)}else{var w,b,v=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),y=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),x=v||y,S=n.body.indexOf(",")>=0;if(!x&&!S)return n.post.match(/,.*\}/)?m(t=n.pre+"{"+n.body+o+n.post):[t];if(x)w=n.body.split(/\.\./);else if(1===(w=u(n.body)).length&&1===(w=m(w[0],!1).map(d)).length)return a.map((function(t){return n.pre+w[0]+t}));if(x){var O=l(w[0]),k=l(w[1]),E=Math.max(w[0].length,w[1].length),R=3==w.length?Math.abs(l(w[2])):1,z=f;k<O&&(R*=-1,z=g);var M=w.some(p);b=[];for(var C=O;z(C,k);C+=R){var A;if(y)"\\"===(A=String.fromCharCode(C))&&(A="");else if(A=String(C),M){var N=E-A.length;if(N>0){var P=new Array(N+1).join("0");A=C<0?"-"+P+A.slice(1):P+A}}b.push(A)}}else{b=[];for(var T=0;T<w.length;T++)b.push.apply(b,m(w[T],!1))}for(T=0;T<b.length;T++)for(h=0;h<a.length;h++)c=r+b[T]+a[h],(!e||x||c)&&s.push(c)}return s}},112:t=>{const e="object"==typeof process&&process&&"win32"===process.platform;t.exports=e?{sep:"\\"}:{sep:"/"}},27:(t,e,s)=>{const i=t.exports=(t,e,s={})=>(m(e),!(!s.nocomment&&"#"===e.charAt(0))&&new y(e,s).match(t));t.exports=i;const n=s(112);i.sep=n.sep;const r=Symbol("globstar **");i.GLOBSTAR=r;const o=s(928),a={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},h="[^/]",l=h+"*?",c=t=>t.split("").reduce(((t,e)=>(t[e]=!0,t)),{}),u=c("().*{}+?[]^$\\!"),d=c("[.("),p=/\/+/;i.filter=(t,e={})=>(s,n,r)=>i(s,t,e);const f=(t,e={})=>{const s={};return Object.keys(t).forEach((e=>s[e]=t[e])),Object.keys(e).forEach((t=>s[t]=e[t])),s};i.defaults=t=>{if(!t||"object"!=typeof t||!Object.keys(t).length)return i;const e=i,s=(s,i,n)=>e(s,i,f(t,n));return(s.Minimatch=class extends e.Minimatch{constructor(e,s){super(e,f(t,s))}}).defaults=s=>e.defaults(f(t,s)).Minimatch,s.filter=(s,i)=>e.filter(s,f(t,i)),s.defaults=s=>e.defaults(f(t,s)),s.makeRe=(s,i)=>e.makeRe(s,f(t,i)),s.braceExpand=(s,i)=>e.braceExpand(s,f(t,i)),s.match=(s,i,n)=>e.match(s,i,f(t,n)),s},i.braceExpand=(t,e)=>g(t,e);const g=(t,e={})=>(m(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:o(t)),m=t=>{if("string"!=typeof t)throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")},w=Symbol("subparse");i.makeRe=(t,e)=>new y(t,e||{}).makeRe(),i.match=(t,e,s={})=>{const i=new y(e,s);return t=t.filter((t=>i.match(t))),i.options.nonull&&!t.length&&t.push(e),t};const b=t=>t.replace(/\\([^-\]])/g,"$1"),v=t=>t.replace(/[[\]\\]/g,"\\$&");class y{constructor(t,e){m(t),e||(e={}),this.options=e,this.set=[],this.pattern=t,this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||!1===e.allowWindowsEscape,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.make()}debug(){}make(){const t=this.pattern,e=this.options;if(!e.nocomment&&"#"===t.charAt(0))return void(this.comment=!0);if(!t)return void(this.empty=!0);this.parseNegate();let s=this.globSet=this.braceExpand();e.debug&&(this.debug=(...t)=>console.error(...t)),this.debug(this.pattern,s),s=this.globParts=s.map((t=>t.split(p))),this.debug(this.pattern,s),s=s.map(((t,e,s)=>t.map(this.parse,this))),this.debug(this.pattern,s),s=s.filter((t=>-1===t.indexOf(!1))),this.debug(this.pattern,s),this.set=s}parseNegate(){if(this.options.nonegate)return;const t=this.pattern;let e=!1,s=0;for(let i=0;i<t.length&&"!"===t.charAt(i);i++)e=!e,s++;s&&(this.pattern=t.slice(s)),this.negate=e}matchOne(t,e,s){var i=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var n=0,o=0,a=t.length,h=e.length;n<a&&o<h;n++,o++){this.debug("matchOne loop");var l,c=e[o],u=t[n];if(this.debug(e,c,u),!1===c)return!1;if(c===r){this.debug("GLOBSTAR",[e,c,u]);var d=n,p=o+1;if(p===h){for(this.debug("** at the end");n<a;n++)if("."===t[n]||".."===t[n]||!i.dot&&"."===t[n].charAt(0))return!1;return!0}for(;d<a;){var f=t[d];if(this.debug("\nglobstar while",t,d,e,p,f),this.matchOne(t.slice(d),e.slice(p),s))return this.debug("globstar found match!",d,a,f),!0;if("."===f||".."===f||!i.dot&&"."===f.charAt(0)){this.debug("dot detected!",t,d,e,p);break}this.debug("globstar swallow a segment, and continue"),d++}return!(!s||(this.debug("\n>>> no match, partial?",t,d,e,p),d!==a))}if("string"==typeof c?(l=u===c,this.debug("string match",c,u,l)):(l=u.match(c),this.debug("pattern match",c,u,l)),!l)return!1}if(n===a&&o===h)return!0;if(n===a)return s;if(o===h)return n===a-1&&""===t[n];throw new Error("wtf?")}braceExpand(){return g(this.pattern,this.options)}parse(t,e){m(t);const s=this.options;if("**"===t){if(!s.noglobstar)return r;t="*"}if(""===t)return"";let i="",n=!1,o=!1;const c=[],p=[];let f,g,y,x,S=!1,O=-1,k=-1,E="."===t.charAt(0),R=s.dot||E;const z=t=>"."===t.charAt(0)?"":s.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",M=()=>{if(f){switch(f){case"*":i+=l,n=!0;break;case"?":i+=h,n=!0;break;default:i+="\\"+f}this.debug("clearStateChar %j %j",f,i),f=!1}};for(let e,r=0;r<t.length&&(e=t.charAt(r));r++)if(this.debug("%s\t%s %s %j",t,r,i,e),o){if("/"===e)return!1;u[e]&&(i+="\\"),i+=e,o=!1}else switch(e){case"/":return!1;case"\\":if(S&&"-"===t.charAt(r+1)){i+=e;continue}M(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",t,r,i,e),S){this.debug("  in class"),"!"===e&&r===k+1&&(e="^"),i+=e;continue}this.debug("call clearStateChar %j",f),M(),f=e,s.noext&&M();continue;case"(":{if(S){i+="(";continue}if(!f){i+="\\(";continue}const e={type:f,start:r-1,reStart:i.length,open:a[f].open,close:a[f].close};this.debug(this.pattern,"\t",e),c.push(e),i+=e.open,0===e.start&&"!"!==e.type&&(E=!0,i+=z(t.slice(r+1))),this.debug("plType %j %j",f,i),f=!1;continue}case")":{const t=c[c.length-1];if(S||!t){i+="\\)";continue}c.pop(),M(),n=!0,y=t,i+=y.close,"!"===y.type&&p.push(Object.assign(y,{reEnd:i.length}));continue}case"|":{const e=c[c.length-1];if(S||!e){i+="\\|";continue}M(),i+="|",0===e.start&&"!"!==e.type&&(E=!0,i+=z(t.slice(r+1)));continue}case"[":if(M(),S){i+="\\"+e;continue}S=!0,k=r,O=i.length,i+=e;continue;case"]":if(r===k+1||!S){i+="\\"+e;continue}g=t.substring(k+1,r);try{RegExp("["+v(b(g))+"]"),i+=e}catch(t){i=i.substring(0,O)+"(?:$.)"}n=!0,S=!1;continue;default:M(),!u[e]||"^"===e&&S||(i+="\\"),i+=e}for(S&&(g=t.slice(k+1),x=this.parse(g,w),i=i.substring(0,O)+"\\["+x[0],n=n||x[1]),y=c.pop();y;y=c.pop()){let t;t=i.slice(y.reStart+y.open.length),this.debug("setting tail",i,y),t=t.replace(/((?:\\{2}){0,64})(\\?)\|/g,((t,e,s)=>(s||(s="\\"),e+e+s+"|"))),this.debug("tail=%j\n   %s",t,t,y,i);const e="*"===y.type?l:"?"===y.type?h:"\\"+y.type;n=!0,i=i.slice(0,y.reStart)+e+"\\("+t}M(),o&&(i+="\\\\");const C=d[i.charAt(0)];for(let t=p.length-1;t>-1;t--){const s=p[t],n=i.slice(0,s.reStart),r=i.slice(s.reStart,s.reEnd-8);let o=i.slice(s.reEnd);const a=i.slice(s.reEnd-8,s.reEnd)+o,h=n.split(")").length,l=n.split("(").length-h;let c=o;for(let t=0;t<l;t++)c=c.replace(/\)[+*?]?/,"");o=c,i=n+r+o+(""===o&&e!==w?"(?:$|\\/)":"")+a}if(""!==i&&n&&(i="(?=.)"+i),C&&(i=(E?"":R?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)")+i),e===w)return[i,n];if(s.nocase&&!n&&(n=t.toUpperCase()!==t.toLowerCase()),!n)return(t=>t.replace(/\\(.)/g,"$1"))(t);const A=s.nocase?"i":"";try{return Object.assign(new RegExp("^"+i+"$",A),{_glob:t,_src:i})}catch(t){return new RegExp("$.")}}makeRe(){if(this.regexp||!1===this.regexp)return this.regexp;const t=this.set;if(!t.length)return this.regexp=!1,this.regexp;const e=this.options,s=e.noglobstar?l:e.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",i=e.nocase?"i":"";let n=t.map((t=>(t=t.map((t=>"string"==typeof t?(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"))(t):t===r?r:t._src)).reduce(((t,e)=>(t[t.length-1]===r&&e===r||t.push(e),t)),[]),t.forEach(((e,i)=>{e===r&&t[i-1]!==r&&(0===i?t.length>1?t[i+1]="(?:\\/|"+s+"\\/)?"+t[i+1]:t[i]=s:i===t.length-1?t[i-1]+="(?:\\/|"+s+")?":(t[i-1]+="(?:\\/|\\/"+s+"\\/)"+t[i+1],t[i+1]=r))})),t.filter((t=>t!==r)).join("/")))).join("|");n="^(?:"+n+")$",this.negate&&(n="^(?!"+n+").*$");try{this.regexp=new RegExp(n,i)}catch(t){this.regexp=!1}return this.regexp}match(t,e=this.partial){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return""===t;if("/"===t&&e)return!0;const s=this.options;"/"!==n.sep&&(t=t.split(n.sep).join("/")),t=t.split(p),this.debug(this.pattern,"split",t);const i=this.set;let r;this.debug(this.pattern,"set",i);for(let e=t.length-1;e>=0&&(r=t[e],!r);e--);for(let n=0;n<i.length;n++){const o=i[n];let a=t;if(s.matchBase&&1===o.length&&(a=[r]),this.matchOne(a,o,e))return!!s.flipNegate||!this.negate}return!s.flipNegate&&this.negate}static defaults(t){return i.defaults(t).Minimatch}}i.Minimatch=y}},e={};function s(i){var n=e[i];if(void 0!==n)return n.exports;var r=e[i]={exports:{}};return t[i](r,r.exports,s),r.exports}s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};s.d(i,{l5:()=>Lt,eI:()=>k,$n:()=>re,Sc:()=>oe,jl:()=>jt,Q1:()=>ct,uA:()=>ft,tr:()=>pt,mc:()=>R,Pp:()=>It,bk:()=>O,B1:()=>te,_V:()=>vt,pd:()=>ne,kV:()=>St,N6:()=>me,N1:()=>Tt,W4:()=>ut,zU:()=>n,Cm:()=>Ot,Vx:()=>r,jo:()=>mt,aL:()=>z,um:()=>Pt,wA:()=>Qt,Fq:()=>Ht,tS:()=>$t,yX:()=>v,z2:()=>pe,cd:()=>ge,Ey:()=>dt,M_:()=>gt,Rp:()=>qt,Z5:()=>Et,l6:()=>he,Ap:()=>ue,eG:()=>Dt,kx:()=>se,M6:()=>Vt,FE:()=>_t,EY:()=>Zt,lM:()=>Bt,Mi:()=>S,cy:()=>ve,Ay:()=>Re,HT:()=>Se,TB:()=>ye,Yx:()=>Ee,rE:()=>be});var n={};s.r(n),s.d(n,{average:()=>m,constrain:()=>o,degreeCircle:()=>u,distribute:()=>f,equals:()=>a,lerp:()=>b,map:()=>w,modulo:()=>p,phi:()=>d,radianCircle:()=>c,random:()=>h,sum:()=>g,truncate:()=>l});var r={};s.r(r),s.d(r,{back:()=>At,displayScene:()=>Ct,getCurrentScene:()=>Mt,prepareScenes:()=>Nt});const o=(t,e,s)=>Math.min(Math.max(t,e),s),a=(t,e,s=Number.EPSILON)=>Math.abs(t-e)<s,h=(t=1,e)=>{let s=t,i=e;return void 0===e&&(s=0,i=t),Math.random()*(i-s)+s},l=t=>0|t,c=2*Math.PI,u=360,d=(Math.sqrt(5)+1)/2,p=(t,e)=>{const s=t%e;return t&&Math.sign(t)!==Math.sign(e)?s+e:s},f=(t,e=0,s=1)=>{const i=h(e,s),n=s-e;return[...new Array(t)].map(((t,s)=>e+p(i+s*d*n,n)))},g=(...t)=>t.reduce(((t,e)=>t+e),0),m=(...t)=>g(...t)/t.length,w=(t,e,s,i=0,n=1)=>(t-e)/(s-e)*(n-i)+i,b=(t,e,s)=>t+(e-t)*s;class v{constructor(t=0,e=0){this.x=+t,this.y=+e}set(t,e){let s,i;if("number"==typeof t)s=t,i=void 0===e?t:e;else{const e=v.from(t);({x:s,y:i}=e)}return this.x=s,this.y=i,this}clone(){return new v(this.x,this.y)}equals(t){const e=v.from(t);return a(this.x,e.x)&&a(this.y,e.y)}calc(t,e,s){let i=0,n=0;if("number"==typeof e)i=t(this.x,e),n=t(this.y,void 0===s?e:s);else{const s=v.from(e);i=t(this.x,s.x),n=t(this.y,s.y)}return this.set(i,n)}add(t,e){return this.calc(((t,e)=>t+e),t,e)}subtract(t,e){return this.calc(((t,e)=>t-e),t,e)}multiply(t,e){return this.calc(((t,e)=>t*e),t,e)}divide(t,e){return this.calc(((t,e)=>t/e),t,e)}modulo(t,e){return this.calc(((t,e)=>p(t,e)),t,e)}power(t,e){return this.calc(((t,e)=>t**e),t,e)}rotate(t=0,e){const{cos:s,sin:i}=Math,n=t*c,r=v.from(e),o=this.clone().subtract(r),a=o.x*s(n)-o.y*i(n),h=o.y*s(n)+o.x*i(n);return this.set(a,h).add(r)}constrain(t,e){const s=v.from(t),i=v.from(e),n=o(this.x,Math.min(s.x,i.x),Math.max(s.x,i.x)),r=o(this.y,Math.min(s.y,i.y),Math.max(s.y,i.y));return this.set(n,r)}lerp(t,e){const s=v.from(t).clone().subtract(this).multiply(e);return this.add(s)}distance(t){const e=v.from(t);return Math.hypot(e.x-this.x,e.y-this.y)}dotProduct(t){const e=v.from(t);return this.x*e.x+this.y*e.y}crossProduct(t){const e=v.from(t);return this.x*e.y-this.y*e.x}isOnSameSide(t,e){const s=v.from(t),i=this.clone().subtract(e.start),n=s.clone().subtract(e.start),r=e.getDelta(),{sign:o}=Math;return o(i.crossProduct(r))===o(n.crossProduct(r))}get length(){return this.distance()}get angle(){return 0===this.x&&0===this.y?0:Math.atan(this.y/this.x)/c+(this.x<0?.75:.25)}toJSON(){const{x:t,y:e}=this;return[t,e]}static from(t=new v){if(t instanceof v)return t;if(Array.isArray(t))return new v(...t);try{return new v(t.x,t.y)}catch{throw TypeError(`Unexpected type for position: ${JSON.stringify(t)}.`)}}static average(...t){let e=new v;t.forEach((t=>e=e.add(v.from(t))));const s=t.length;return e.divide(s)}}const y=(...t)=>t.slice(1).every((e=>e===t[0]));function x(t){return"number"==typeof t||t instanceof v?t:"function"==typeof t.getDelta?t.getDelta():"number"==typeof t[0]&&"number"==typeof t[1]?v.from(t):S.from(t).getDelta()}class S{constructor(t,e){this.start=v.from(t),this.end=v.from(e)}get width(){return Math.abs(this.start.x-this.end.x)}get height(){return Math.abs(this.start.y-this.end.y)}get length(){return this.start.distance(this.end)}clone(){return new S(this.start.clone(),this.end.clone())}equals(t){const e=S.from(t);return this.start.equals(e.start)&&this.end.equals(e.end)}getDelta(){return this.end.clone().subtract(this.start)}add(t){const e=x(t);return this.end.add(e),this}translate(t){const e=x(t);return this.start.add(e),this.end.add(e),this}multiply(t){if("number"==typeof t)return this.add(this.getDelta().multiply(t-1)),this;const e=x(t);return this.end.multiply(e),this}intersect(t){const e=S.from(t);if(!this.start.isOnSameSide(this.end,e)&&!e.start.isOnSameSide(e.end,this))return!0;const s=this.getDelta(),i=e.start.clone().subtract(this.start);return!(0!==s.crossProduct(i)||0!==s.crossProduct(e.getDelta())||y(this.start.x<e.start.x,this.start.x<e.end.x,this.end.x<e.start.x,this.end.x<e.end.x)&&y(this.start.y<e.start.y,this.start.y<e.end.y,this.end.y<e.start.y,this.end.y<e.end.y))}getIntersectionPoint(t){const e=S.from(t);if(!this.intersect(e))return null;const s=e.getDelta(),i=this.getDelta().crossProduct(s);if(0===i)return this.start.clone().constrain(e.start,e.end).lerp(this.end.clone().constrain(e.start,e.end),.5);const n=this.start.clone().subtract(e.start);return this.start.clone().lerp(this.end,s.crossProduct(n)/i)}getClosestToPoint(t){const e=v.from(t),s=new S(this.start,e).getDelta(),i=this.getDelta(),n=s.dotProduct(i)/this.length**2;return this.start.clone().add(i.multiply(n)).constrain(this.start,this.end)}toJSON(){const{start:t,end:e}=this;return[t,e]}static from(t=new S){if(t instanceof S)return t;if(Array.isArray(t)&&2===t.length)return new S(...t);try{return new S(t.start,t.end)}catch{throw new TypeError(`Unexpected type for vector: ${JSON.stringify(t)}.`)}}}class O{constructor(){this.eventListeners={}}on(t,e,s=!1){const i={callback:e,element:this,isTargeted:s};return(Array.isArray(t)?t:[t]).forEach((t=>{const[e,s]=t.split(".");this.eventListeners[e]||(this.eventListeners[e]=[]),this.eventListeners[e].push({...i,modifier:s})})),this}fire(t){const e=this.eventListeners[t.name];return e&&e.forEach((e=>{if(!e.isTargeted||e.element===t.target){const s=t.getModifier&&t.getModifier();e.modifier&&e.modifier!==s||e.callback.call(this,t)}})),this}removeListener(t,e){return(Array.isArray(t)?t:[t]).forEach((t=>{const[s,i]=t.split(".");e||i?this.eventListeners[s]=this.eventListeners[s].filter((t=>e&&t.callback!==e||i&&t.modifier!==i)):delete this.eventListeners[s]})),this}removeAllListener(){return this.eventListeners={},this}static get events(){return{}}}class k{constructor(t,e,s){this.name=t,this.target=e,this.event=s,this.bubble=!0}stop(){return this.bubble=!1,this}getModifier(){return null}prevent(){return this.event.preventDefault(),this}}const E=Symbol("_scenePromise");class R extends O{constructor(t=new v,e){super(),this.position=v.from(t),this.options={},this.setOptions(e),this.children=[],this.parent=null,this.frameCount=0,this[E]=new Promise((t=>{this.on(R.events.attach,(()=>{const e=this.getRoot();e.isScene?t(e):e.getScene().then((e=>t(e)))}),!0)}))}setOptions(t={}){return this.options={...this.constructor.defaultOptions,...this.options,...t},this.options.rotationCenter=v.from(this.options.rotationCenter),"number"!=typeof this.options.scale&&(this.options.scale=v.from(this.options.scale)),this}isHover(){return!1}add(...t){return t.forEach((t=>{if(t===this)throw new RangeError("A container can't contain itself.");if(t.isScene)throw new RangeError("A scene can't be contained in another container.");t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.fire(new k(R.events.attach,t))})),this}remove(...t){return t.forEach((t=>{if(this.children.includes(t)){const e=this.children.splice(this.children.indexOf(t),1)[0];e.parent=null,e.fire(new k(R.events.detach,e))}})),this}empty(){return this.remove(...this.children)}delete(){return this.parent&&this.parent.remove(this),this}getScene(){return this[E]}getRoot(){return this.parent?this.parent.getRoot():this}getAbsolutePosition(){const t=new v;return this.climbAncestry((e=>{t.rotate(e.options.rotation,e.options.rotationCenter).add(e.position)})),t}fire(t){return super.fire(t),this.parent&&t.bubble&&this.parent.fire(t),this}getTarget(t,e){if(!this.options.shown)return null;e.save(),e.translate(this.position.x,this.position.y),this.setContext(e);let s=null,i=this.children.length-1;for(;!s&&i>=0;)s=this.children[i].getTarget(t,e),--i;let n=s;return(!s||s.options.zIndex<0&&s.parent===this)&&this.isHover(t,e)&&(n=this),e.restore(),n}setContext(t){if(this.options.clip){const e=new window.Path2D,{clip:s}=this.options,{x:i,y:n}=s.position;t.translate(i,n),s.trace&&s.trace(e),t.clip(e),t.translate(-i,-n)}if(this.options.rotation){const e=v.from(this.options.rotationCenter);t.translate(e.x,e.y),t.rotate(this.options.rotation*c),t.translate(-e.x,-e.y)}if("number"==typeof this.options.scale)1!==this.options.scale&&t.scale(this.options.scale,this.options.scale);else{const e=v.from(this.options.scale);1===e.x&&1===e.y||t.scale(e.x,e.y)}return this}render(t){if(!this.options.shown)return this;this.frameCount++,this.fire(new k(R.events.draw,this)),t.save(),t.translate(this.position.x,this.position.y),this.setContext(t),this.children.sort(((t,e)=>t.options.zIndex-e.options.zIndex)),R.setOpacity(t,this.options.opacity);const e=this.children.findIndex((t=>t.options.zIndex>=0)),s=-1===e?this.children.length:e;for(let e=0,i=s;e<i;++e)this.children[e].render(t);this.makePath(t);for(let e=s,i=this.children.length;e<i;++e)this.children[e].render(t);return t.restore(),this}makePath(){return this}show(){return this.options.shown=!0,this.fire(new k(R.events.show,this)),this}hide(){return this.options.shown=!1,this.fire(new k(R.events.hide,this)),this}isAncestorOf(t){return!(!t||!t.parent)&&(t.parent===this||this.isAncestorOf(t.parent))}climbAncestry(t,e){t(this),this.parent&&this.parent!==e&&this.parent.climbAncestry(t)}toJSON(){const{defaultOptions:t}=this.constructor,e={};Object.keys(this.options).forEach((s=>{const i=this.options[s];(i&&i.equals?i.equals(t[s]):Object.is(i,t[s]))||(e[s]=i)}));const s={constructor:this.constructor.name,position:this.position};return this.children.length&&(s.children=this.children.map((t=>t.toJSON()))),Object.keys(e).length&&(s.options=e),s}clone(){return this.constructor.from(this.toJSON())}static setOpacity(t,e){null!==e&&t.globalAlpha!==e&&(t.globalAlpha=e)}static from(t){return new R(t.position,t.options)}static get defaultOptions(){return{shown:!0,opacity:null,rotation:0,rotationCenter:new v,scale:1,zIndex:1,clip:null}}static get events(){return{...super.events,attach:"attach",detach:"detach",draw:"draw",hide:"hide",show:"show"}}}class z extends R{constructor(t=1,e=1,s){super(void 0,s),this.ctx=this.constructor.getDrawingContext(t,e)}setImageSmoothing(t){return this.ctx.imageSmoothingEnabled=t,this}clear(){if(this.ctx.clearRect(0,0,this.width,this.height),this.options.fill){z.setOpacity(this.ctx,this.options.opacity);const{width:t,height:e}=this;this.ctx.fillStyle=this.options.fill.toString(this.ctx),this.ctx.fillRect(0,0,t,e)}return this}render(){return this.clear(),super.render(this.ctx),this}get width(){return this.ctx.canvas.width}set width(t){this.ctx.canvas.width=+t}get height(){return this.ctx.canvas.height}set height(t){this.ctx.canvas.height=+t}get size(){return new v(this.width,this.height)}get center(){return this.size.divide(2)}getRandomPosition(){return new v(h(this.width),h(this.height))}getImageData(t){let e;return e=t?S.from(t):new S(void 0,this.size),this.render(),this.ctx.getImageData(e.start.x,e.start.y,e.end.x,e.end.y)}setImageData(t,e){const s=v.from(e);this.ctx.putImageData(t,s.x,s.y)}toImage(t,e="image/png"){let s;s=t?S.from(t):new S(void 0,[this.width,this.height]);const i=window.document.createElement("img"),{width:n,height:r}=this,o=s.getDelta();return this.width=o.x,this.height=o.y,i.width=this.width,i.height=this.height,this.ctx.translate(-s.start.x,-s.start.y),this.render(),i.src=this.ctx.canvas.toDataURL(e),this.width=n,this.height=r,i}static getDrawingContext(t=1,e=1){const s=window.document.createElement("canvas");return s.width=t,s.height=e,s.getContext("2d")}static get defaultOptions(){return{...super.defaultOptions,fill:null,opacity:1}}}var M={grad:.9,turn:360,rad:360/(2*Math.PI)},C=function(t){return"string"==typeof t?t.length>0:"number"==typeof t},A=function(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=Math.pow(10,e)),Math.round(s*t)/s+0},N=function(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=1),t>s?s:t>e?t:e},P=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},T=function(t){return{r:N(t.r,0,255),g:N(t.g,0,255),b:N(t.b,0,255),a:N(t.a)}},L=function(t){return{r:A(t.r),g:A(t.g),b:A(t.b),a:A(t.a,3)}},H=/^#([0-9a-f]{3,8})$/i,I=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},j=function(t){var e=t.r,s=t.g,i=t.b,n=t.a,r=Math.max(e,s,i),o=r-Math.min(e,s,i),a=o?r===e?(s-i)/o:r===s?2+(i-e)/o:4+(e-s)/o:0;return{h:60*(a<0?a+6:a),s:r?o/r*100:0,v:r/255*100,a:n}},D=function(t){var e=t.h,s=t.s,i=t.v,n=t.a;e=e/360*6,s/=100,i/=100;var r=Math.floor(e),o=i*(1-s),a=i*(1-(e-r)*s),h=i*(1-(1-e+r)*s),l=r%6;return{r:255*[i,a,o,o,h,i][l],g:255*[h,i,i,a,o,o][l],b:255*[o,o,h,i,i,a][l],a:n}},J=function(t){return{h:P(t.h),s:N(t.s,0,100),l:N(t.l,0,100),a:N(t.a)}},$=function(t){return{h:A(t.h),s:A(t.s),l:A(t.l),a:A(t.a,3)}},G=function(t){return D((s=(e=t).s,{h:e.h,s:(s*=((i=e.l)<50?i:100-i)/100)>0?2*s/(i+s)*100:0,v:i+s,a:e.a}));var e,s,i},q=function(t){return{h:(e=j(t)).h,s:(n=(200-(s=e.s))*(i=e.v)/100)>0&&n<200?s*i/100/(n<=100?n:200-n)*100:0,l:n/2,a:e.a};var e,s,i,n},B=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,F=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,_=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,U=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,W={string:[[function(t){var e=H.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:4===t.length?A(parseInt(t[3]+t[3],16)/255,2):1}:6===t.length||8===t.length?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:8===t.length?A(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=_.exec(t)||U.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:T({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:void 0===e[7]?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=B.exec(t)||F.exec(t);if(!e)return null;var s,i,n=J({h:(s=e[1],i=e[2],void 0===i&&(i="deg"),Number(s)*(M[i]||1)),s:Number(e[3]),l:Number(e[4]),a:void 0===e[5]?1:Number(e[5])/(e[6]?100:1)});return G(n)},"hsl"]],object:[[function(t){var e=t.r,s=t.g,i=t.b,n=t.a,r=void 0===n?1:n;return C(e)&&C(s)&&C(i)?T({r:Number(e),g:Number(s),b:Number(i),a:Number(r)}):null},"rgb"],[function(t){var e=t.h,s=t.s,i=t.l,n=t.a,r=void 0===n?1:n;if(!C(e)||!C(s)||!C(i))return null;var o=J({h:Number(e),s:Number(s),l:Number(i),a:Number(r)});return G(o)},"hsl"],[function(t){var e=t.h,s=t.s,i=t.v,n=t.a,r=void 0===n?1:n;if(!C(e)||!C(s)||!C(i))return null;var o=function(t){return{h:P(t.h),s:N(t.s,0,100),v:N(t.v,0,100),a:N(t.a)}}({h:Number(e),s:Number(s),v:Number(i),a:Number(r)});return D(o)},"hsv"]]},V=function(t,e){for(var s=0;s<e.length;s++){var i=e[s][0](t);if(i)return[i,e[s][1]]}return[null,void 0]},Y=function(t,e){var s=q(t);return{h:s.h,s:N(s.s+100*e,0,100),l:s.l,a:s.a}},X=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},Z=function(t,e){var s=q(t);return{h:s.h,s:s.s,l:N(s.l+100*e,0,100),a:s.a}},K=function(){function t(t){this.parsed=function(t){return"string"==typeof t?V(t.trim(),W.string):"object"==typeof t&&null!==t?V(t,W.object):[null,void 0]}(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return null!==this.parsed},t.prototype.brightness=function(){return A(X(this.rgba),2)},t.prototype.isDark=function(){return X(this.rgba)<.5},t.prototype.isLight=function(){return X(this.rgba)>=.5},t.prototype.toHex=function(){return e=(t=L(this.rgba)).r,s=t.g,i=t.b,r=(n=t.a)<1?I(A(255*n)):"","#"+I(e)+I(s)+I(i)+r;var t,e,s,i,n,r},t.prototype.toRgb=function(){return L(this.rgba)},t.prototype.toRgbString=function(){return e=(t=L(this.rgba)).r,s=t.g,i=t.b,(n=t.a)<1?"rgba("+e+", "+s+", "+i+", "+n+")":"rgb("+e+", "+s+", "+i+")";var t,e,s,i,n},t.prototype.toHsl=function(){return $(q(this.rgba))},t.prototype.toHslString=function(){return e=(t=$(q(this.rgba))).h,s=t.s,i=t.l,(n=t.a)<1?"hsla("+e+", "+s+"%, "+i+"%, "+n+")":"hsl("+e+", "+s+"%, "+i+"%)";var t,e,s,i,n},t.prototype.toHsv=function(){return t=j(this.rgba),{h:A(t.h),s:A(t.s),v:A(t.v),a:A(t.a,3)};var t},t.prototype.invert=function(){return Q({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},t.prototype.saturate=function(t){return void 0===t&&(t=.1),Q(Y(this.rgba,t))},t.prototype.desaturate=function(t){return void 0===t&&(t=.1),Q(Y(this.rgba,-t))},t.prototype.grayscale=function(){return Q(Y(this.rgba,-1))},t.prototype.lighten=function(t){return void 0===t&&(t=.1),Q(Z(this.rgba,t))},t.prototype.darken=function(t){return void 0===t&&(t=.1),Q(Z(this.rgba,-t))},t.prototype.rotate=function(t){return void 0===t&&(t=15),this.hue(this.hue()+t)},t.prototype.alpha=function(t){return"number"==typeof t?Q({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):A(this.rgba.a,3);var e},t.prototype.hue=function(t){var e=q(this.rgba);return"number"==typeof t?Q({h:t,s:e.s,l:e.l,a:e.a}):A(e.h)},t.prototype.isEqual=function(t){return this.toHex()===Q(t).toHex()},t}(),Q=function(t){return t instanceof K?t:new K(t)},tt=[],et=function(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=1),t>s?s:t>e?t:e},st=function(t){var e=t/255;return e<.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},it=function(t){return 255*(t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t)},nt=96.422,rt=82.521,ot=216/24389,at=24389/27,ht=function(t){var e=function(t){var e=st(t.r),s=st(t.g),i=st(t.b);return function(t){return{x:et(t.x,0,nt),y:et(t.y,0,100),z:et(t.z,0,rt),a:et(t.a)}}(function(t){return{x:1.0478112*t.x+.0228866*t.y+-.050127*t.z,y:.0295424*t.x+.9904844*t.y+-.0170491*t.z,z:-.0092345*t.x+.0150436*t.y+.7521316*t.z,a:t.a}}({x:100*(.4124564*e+.3575761*s+.1804375*i),y:100*(.2126729*e+.7151522*s+.072175*i),z:100*(.0193339*e+.119192*s+.9503041*i),a:t.a}))}(t),s=e.x/nt,i=e.y/100,n=e.z/rt;return s=s>ot?Math.cbrt(s):(at*s+16)/116,{l:116*(i=i>ot?Math.cbrt(i):(at*i+16)/116)-16,a:500*(s-i),b:200*(i-(n=n>ot?Math.cbrt(n):(at*n+16)/116)),alpha:e.a}};!function(t){t.forEach((function(t){tt.indexOf(t)<0&&(t(K,W),tt.push(t))}))}([function(t,e){var s={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var n in s)i[s[n]]=n;var r={};t.prototype.toName=function(e){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var n,o,a=i[this.toHex()];if(a)return a;if(null==e?void 0:e.closest){var h=this.toRgb(),l=1/0,c="black";if(!r.length)for(var u in s)r[u]=new t(s[u]).toRgb();for(var d in s){var p=(n=h,o=r[d],Math.pow(n.r-o.r,2)+Math.pow(n.g-o.g,2)+Math.pow(n.b-o.b,2));p<l&&(l=p,c=d)}return c}},e.string.push([function(e){var i=e.toLowerCase(),n="transparent"===i?"#0000":s[i];return n?new t(n).toRgb():null},"name"])},function(t){function e(t,e,s){void 0===s&&(s=5);for(var i=[],n=1/(s-1),r=0;r<=s-1;r++)i.push(t.mix(e,n*r));return i}t.prototype.mix=function(e,s){void 0===s&&(s=.5);var i=e instanceof t?e:new t(e),n=function(t,e,s){var i,n=ht(t),r=ht(e);return function(t){var e=(t.l+16)/116,s=t.a/500+e,i=e-t.b/200;return function(t){var e,s,i=.9555766*(e=t).x+-.0230393*e.y+.0631636*e.z,n=-.0282895*e.x+1.0099416*e.y+.0210077*e.z,r=.0122982*e.x+-.020483*e.y+1.3299098*e.z;return s={r:it(.032404542*i-.015371385*n-.004985314*r),g:it(-.00969266*i+.018760108*n+41556e-8*r),b:it(556434e-9*i-.002040259*n+.010572252*r),a:t.a},{r:et(s.r,0,255),g:et(s.g,0,255),b:et(s.b,0,255),a:et(s.a)}}({x:(Math.pow(s,3)>ot?Math.pow(s,3):(116*s-16)/at)*nt,y:100*(t.l>8?Math.pow((t.l+16)/116,3):t.l/at),z:(Math.pow(i,3)>ot?Math.pow(i,3):(116*i-16)/at)*rt,a:t.alpha})}({l:et((i={l:n.l*(1-s)+r.l*s,a:n.a*(1-s)+r.a*s,b:n.b*(1-s)+r.b*s,alpha:n.alpha*(1-s)+r.alpha*s}).l,0,400),a:i.a,b:i.b,alpha:et(i.alpha)})}(this.toRgb(),i.toRgb(),s);return new t(n)},t.prototype.tints=function(t){return e(this,"#fff",t)},t.prototype.shades=function(t){return e(this,"#000",t)},t.prototype.tones=function(t){return e(this,"#808080",t)}}]);const lt=Symbol("_parsed");class ct{constructor(...t){this[lt]=null,this.set(...t)}clone(){return new ct(this)}get red(){return this[lt].rgba.r/255}set red(t){this[lt].rgba.r=o(255*t,0,255)}get green(){return this[lt].rgba.g/255}set green(t){this[lt].rgba.g=o(255*t,0,255)}get blue(){return this[lt].rgba.b/255}set blue(t){this[lt].rgba.b=o(255*t,0,255)}get alpha(){return this[lt].rgba.a}set alpha(t){this[lt].rgba.a=o(t,0,1)}get array(){return[this.red,this.green,this.blue]}get hex(){return this[lt].toHex()}get rgb(){return this.hex}get name(){return this[lt].toName({closest:!0})}set(...t){const[e]=t;let s,i;if(e instanceof ct)s=e[lt].rgba,[,i=s.a]=t;else if("string"==typeof e)s=e,[,i=1]=t;else if(null==e)s="#000",i=1;else if(t.length<3)s=`#${l(t[0]).toString(16)}`,[,i=1]=t;else{const[e,n,r]=t.slice(0,3).map((t=>255*t));[,,,i=1]=t,s={r:e,g:n,b:r}}return this[lt]=Q(s).alpha(i),this}grey(){return this[lt]=this[lt].grayscale(),this}hue(t){return this[lt]=this[lt].hue(t*u),this}saturation(t){const e=this[lt].toHsl();return e.s=100*t,this[lt]=Q(e),this}lightness(t){const e=this[lt].toHsl();return e.l=100*t,this[lt]=Q(e),this}reverse(){return this[lt]=this[lt].invert(),this}level(t){const{r:e,g:s,b:i}=this[lt].rgba,n=255/t;return this[lt].rgba.r=l(e/n)*n+n/2,this[lt].rgba.g=l(s/n)*n+n/2,this[lt].rgba.b=l(i/n)*n+n/2,this}lerp(t,e){const s=ct.from(t);return this[lt]=this[lt].mix(s[lt],e),this}toString(){return this.hex}toJSON(){return[...this.array,this.alpha]}static from(...t){const e=t[0];return e instanceof ct?e:new ct(...t)}}ct.prototype.gray=ct.prototype.grey,ct.prototype.mix=ct.prototype.lerp;class ut{constructor(t,e,s){this.from=v.from(t),this.to=v.from(e),this.colorStops=s}toString(t){const e=v.from(this.from),s=v.from(this.to),i=t.createLinearGradient(e.x,e.y,s.x,s.y);return Object.keys(this.colorStops).forEach((t=>i.addColorStop(t,this.colorStops[t].toString()))),i}}class dt{constructor(t,e,s){this.position=v.from(t),this.radius=e,this.colorStops=s}toString(t){const e=v.from(this.position),s=t.createRadialGradient(e.x,e.y,0,e.x,e.y,this.radius);return Object.keys(this.colorStops).forEach((t=>s.addColorStop(t,this.colorStops[t].toString()))),s}}class pt{constructor(t,e,s){this.position=v.from(t),this.startAngle=e,this.colorStops=s}toString(t){const e=v.from(this.position),s=t.createConicGradient((this.startAngle-.25)*c,e.x,e.y);return Object.keys(this.colorStops).forEach((t=>{s.addColorStop(Number(t),this.colorStops[t].toString())})),s}}class ft extends R{constructor(t,e={}){super(t,e),this.path=null,this.isClicked=!1,this.isHovered=!1}getOrigin(){return v.from(this.options.origin)}setOptions(t={}){const{shadow:e}=this.options;return super.setOptions(t),"string"!=typeof this.options.origin&&(this.options.origin=v.from(this.options.origin)),this.options.shadow={...ft.defaultOptions.shadow,...e,...t.shadow},this.options.shadow.position=v.from(this.options.shadow.position),this}get willFill(){return Boolean(this.options.fill)}get willStroke(){return Boolean(this.options.stroke)&&this.options.strokeWidth>0}setContext(t){if(super.setContext(t),this.options.shadow.color){const e=v.from(this.options.shadow.position);t.shadowColor=this.options.shadow.color.toString(),t.shadowBlur=this.options.shadow.blur,t.shadowOffsetX=e.x,t.shadowOffsetY=e.y}else t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;if(this.willFill&&(t.fillStyle=this.options.fill.toString(t)),this.willStroke)if(t.lineJoin=this.options.join,t.lineCap=this.options.cap,t.strokeStyle=this.options.stroke.toString(t),t.lineWidth=this.options.strokeWidth,this.options.dashed){const{dashed:e,strokeWidth:s}=this.options,i=Array.isArray(e)?e:ft.dashes.default;t.setLineDash(i.map((t=>t*s)))}else t.setLineDash([]);return this}makePath(t){if(this.willFill||this.willStroke){const e=this.getOrigin();t.translate(e.x,e.y),this.path=new window.Path2D,this.trace(this.path),this.willFill&&t.fill(this.path),this.willStroke&&t.stroke(this.path),t.translate(-e.x,-e.y)}return this}trace(){throw new ReferenceError(`Unimplemented [trace] function in ${this.constructor.name}.`)}isHover(t,e=z.getDrawingContext()){if(!this.options.shown)return!1;e.save();const s=v.from(t),i=this.getOrigin();if(e.translate(i.x,i.y),!this.willFill&&!this.willStroke)return e.restore(),!1;this.path||(this.path=new window.Path2D,this.trace(this.path));let n=this.willFill&&e.isPointInPath(this.path,s.x,s.y)||this.willStroke&&e.isPointInStroke(this.path,s.x,s.y);return this.options.clip&&(n=n&&this.options.clip.isHover(s,e)),e.restore(),n}static get defaultOptions(){return{...super.defaultOptions,fill:"#000",stroke:null,strokeWidth:2,dashed:!1,cursor:ft.cursors.default,join:ft.joins.miter,origin:new v,shadow:{blur:0,position:new v,color:null}}}static get cursors(){const t={default:"default",none:"none",contextMenu:"context-menu",help:"help",pointer:"pointer",progress:"progress",wait:"wait",cell:"cell",crosshair:"crosshair",text:"text",textVertical:"vertical-text",alias:"alias",copy:"copy",move:"move",noDrop:"no-drop",notAllowed:"not-allowed",grab:"grab",grabbing:"grabbing",allScroll:"all-scroll",colResize:"col-resize",rowResize:"row-resize",nResize:"n-resize",eResize:"e-resize",sResize:"s-resize",wResize:"w-resize",neResize:"ne-resize",seResize:"se-resize",swResize:"sw-resize",nwResize:"nw-resize",ewResize:"ew-resize",nsResize:"ns-resize",neswResize:"nesw-resize",nwseResize:"nwse-resize",zoomIn:"zoom-in",zoomOut:"zoom-out"};return t.link=t.alias,t.verticalResize=t.rowResize,t.horizontalResize=t.colResize,t.topResize=t.nResize,t.rightResize=t.eResize,t.bottomResize=t.sResize,t.leftResize=t.wResize,t}static get joins(){return{miter:"miter",round:"round",bevel:"bevel"}}static get dashes(){const t={default:[4,4],dots:[1,4],long:[9,4]};return t.sewing=[...t.default,...t.dots],t}}class gt extends ft{constructor(t,e=0,s=0,i){super(t,i),this.width=e,this.height=s}trace(t){const{rounded:e}=this.options;return e?t.roundRect(0,0,this.width,this.height,...Array.isArray(e)?e:[e]):t.rect(0,0,this.width,this.height),this}getOrigin(){const{origin:t}=this.options;if("string"==typeof t){const{origins:e}=gt,s=new v;return[e.topRight,e.centerRight,e.bottomRight].includes(t)?s.x=-this.width:[e.topCenter,e.center,e.bottomCenter].includes(t)&&(s.x=-this.width/2),[e.bottomLeft,e.bottomCenter,e.bottomRight].includes(t)?s.y=-this.height:[e.centerLeft,e.center,e.centerRight].includes(t)&&(s.y=-this.height/2),s}return super.getOrigin()}toJSON(){const{width:t,height:e}=this;return{...super.toJSON(),width:t,height:e}}static from(t){return new gt(t.position,t.width,t.height,t.options)}static get defaultOptions(){return{...super.defaultOptions,rounded:0}}static get origins(){return{topLeft:"topLeft",topRight:"topRight",topCenter:"topCenter",center:"center",centerLeft:"centerLeft",centerRight:"centerRight",bottomLeft:"bottomLeft",bottomRight:"bottomRight",bottomCenter:"bottomCenter"}}}class mt extends k{static get events(){return{ready:"ready",error:"error"}}}const wt=Symbol("_url"),bt=Symbol("_offscreen");class vt extends gt{constructor(t,e,s){super(t,void 0,void 0,s),this.file=null,this.isLoaded=!1,this[wt]=null,this[bt]={},this.url=e}set url(t){if(this.url!==t&&(this.file=null,this.isLoaded=!1,this[wt]=t,t)){const e=t=>{this[wt]=t.src,this.file=t,this.isLoaded=!0,this.width=t.width,this.height=t.height,this.fire(new mt(mt.events.ready,this))};t instanceof window.HTMLImageElement?e(t):t instanceof vt?t.isLoaded?e(t.file):t.on(mt.events.ready,(()=>e(t.file))):vt.load(t).then(e).catch((()=>{this.fire(new mt(mt.events.error,this))}))}}get url(){return this[wt]}makePath(t){if(this.isLoaded){t.save();const e=this.getOrigin();t.translate(e.x,e.y);const s=new window.Path2D;this.trace(s),this.path=s,this.willFill&&(t.fill(s),t.shadowBlur=0),this.willStroke&&t.stroke(s),this.draw(t),t.restore()}return this}draw(t){if(this.options.tint){this[bt].cache||(this[bt].cache=z.getDrawingContext(this.width,this.height));const{cache:e}=this[bt],s=this.options.tint.toString();s!==this[bt].tint&&(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.drawImage(this.file,0,0),e.globalCompositeOperation="source-atop",e.fillStyle=s,e.fillRect(0,0,e.canvas.width,e.canvas.height),this[bt].tint=s),t.drawImage(this[bt].cache.canvas,0,0,this.width,this.height)}else t.drawImage(this.file,0,0,this.width,this.height);return this}isHover(...t){if(!this.isLoaded)return!1;const e=this.options.fill;this.options.fill=!0;const s=super.isHover(...t);return this.options.fill=e,s}toJSON(){const t=super.toJSON();delete t.width,delete t.height;const{url:e}=this;return{...t,url:e}}static from(t){return new vt(t.position,t.url,t.options)}static load(t){return Array.isArray(t)?Promise.all(t.map((t=>vt.load(t)))):new Promise(((e,s)=>{const i=window.document.createElement("img");i.crossOrigin="Anonymous",i.src=t,i.addEventListener("load",(()=>e(i))),i.addEventListener("error",(()=>s(new URIError(`Fail to load ${t}.`))))}))}static get defaultOptions(){return{...super.defaultOptions,fill:null,tint:null,description:""}}}const yt=Symbol("_source");class xt{constructor(t,e){this.options={...xt.defaultOptions,...e},this.source=t}get source(){const t=this[yt];return t instanceof z?(t.isLooped||t.render(),t.ctx.canvas):t}set source(t){t instanceof window.HTMLImageElement||t instanceof window.HTMLCanvasElement||t instanceof z?this[yt]=t:t instanceof vt?t.isLoaded?this[yt]=t.file:t.on(mt.events.ready,(()=>{this[yt]=t.file})):t instanceof xt&&(this[yt]=t.source)}get width(){return this[yt].width}get height(){return this[yt].height}toString(t){const{repeat:e,scale:s}=this.options,i=t.createPattern(this.source,e),n=new window.DOMMatrix;if("number"==typeof s)n.a=s,n.d=s;else{const t=v.from(s);n.a=t.x,n.d=t.y}const r=gt.prototype.getOrigin.call(this);return n.e=r.x*n.a,n.f=r.y*n.d,i.setTransform(n),i}static get defaultOptions(){return{repeat:this.repetition.repeat,origin:new v,scale:1}}static get repetition(){return{repeat:"repeat",x:"repeat-x",y:"repeat-y",none:"no-repeat"}}}class St extends k{constructor(t,e,s){super(t,e,s),this.key=s.key}getModifier(){return this.key}static get events(){return{down:"keydown",up:"keyup"}}static get keys(){return{backspace:"Backspace",enter:"Enter",delete:"Delete",escape:"Escape",control:"Control",shift:"Shift",fn:"Fn",arrows:{up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",left:"ArrowLeft"},tab:"Tab",alt:"Alt",altGr:"AltGraph",pageUp:"PageUp",pageDown:"PageDown",start:"Home",end:"End",insert:"Insert"}}}class Ot extends k{constructor(t,e,s,i){super(t,e,i),this.position=v.from(s),this.button=i?i.button:null}getModifier(){return this.button}static get buttons(){return{left:"0",main:"0",wheel:"1",middle:"1",right:"2",secondary:"2",backward:"3",aux1:"3",forward:"4",aux2:"4"}}static get events(){return{down:"mousedown",up:"mouseup",click:"click",contextMenu:"contextmenu",move:"mousemove",hover:"hover",leave:"leave",wheel:"mousewheel",scrollDown:"scrolldown",scrollUp:"scrollup",zoomOut:"zoomout",zoomIn:"zoomin",grab:"grab",drag:"drag",drop:"drop",resize:"resize",rotate:"rotate",doubleClick:"dblclick"}}}const kt=Symbol("_listenForEvents");class Et extends z{constructor(t=window.document.body,e){t===window.document.body&&(t.style.margin=0,t.style.height=`${window.innerHeight}px`);const s=t.getBoundingClientRect();t instanceof window.HTMLCanvasElement?(super(null,0,e),this.ctx=t.getContext("2d")):(super(t,0,e),t.appendChild(this.ctx.canvas)),this.cursorPosition=new v,this.containerPosition=new v(s.left+window.scrollX,s.top+window.scrollY),this.isScene=!0,this.isLooped=!1,this.isClicked=!1,this.fps=0,this.lastTick=null,this[kt](t)}setCursor(t=ft.cursors.default){return this.ctx.canvas.style.cursor=t,this}render(){const t=this.isLooped?window.requestAnimationFrame(this.render.bind(this,void 0)):null;try{super.render(this.ctx)}catch(e){throw window.cancelAnimationFrame(t),this.stopLoop(),e}const e=window.performance.now();return this.isLooped&&this.lastTick&&(this.fps=1e3/(e-this.lastTick)),this.lastTick=e,this}isHover(){return this.options.shown}startLoop(){return this.isLooped=!0,this.render(),this}stopLoop(){return this.isLooped=!1,this.fps=0,this}hide(){return this.ctx.canvas.style.visibility="hidden",super.hide()}show(){return this.ctx.canvas.style.visibility="",super.show()}static from(t){return new Et(void 0,t.options)}static getDrawingContext(t=window.document.body){if(t){const{scrollWidth:e,scrollHeight:s}=t,i=super.getDrawingContext(e,s);return i.canvas.style.display="block",i.canvas.style.position="absolute",i}return null}static get defaultOptions(){return{...super.defaultOptions,cursor:ft.cursors.default}}static get events(){return{...super.events,change:"change-scene"}}}Et.prototype[kt]=function(t){if(this.isReady)throw new EvalError("Can't rebind event a second time.");let e=null,s=null;const i={[Ot.events.down]:(t,e)=>{t.isClicked=!0,s=e},[Ot.events.move]:(t,i)=>{s&&(t.isClicked=t.isClicked&&i.distance(s)<10),t!==e&&(e&&(e.isHovered=!1,e.isAncestorOf(t)||e.fire(new Ot(Ot.events.leave,e,i))),e=t),t.isHovered||(t.isHovered=!0,t.fire(new Ot(Ot.events.hover,t,i))),this.setCursor(t.options.cursor),this.cursorPosition.set(i)},[Ot.events.up]:(t,e,i)=>{s=null,t.isClicked&&(t.fire(new Ot(Ot.events.click,t,e,i)),t.isClicked=!1)},[Ot.events.wheel]:(t,e,s)=>{const i=Ot.events,n=s.deltaY>0?[i.scrollDown,i.zoomOut]:[i.scrollUp,i.zoomIn];t.fire(new Ot(n[0],t,e,s)).fire(new Ot(n[1],t,e,s))},mouseout:(t,e,s)=>{t.fire(new Ot(Ot.events.leave,t,e,s))},mouseenter:(t,e,s)=>{t.fire(new Ot(Ot.events.hover,t,e,s))},[Ot.events.contextMenu]:null,[Ot.events.doubleClick]:null};Object.keys(i).forEach((e=>{t.addEventListener(e,(t=>{if(this.options.shown){const s=new v(t.clientX,t.clientY).subtract(this.containerPosition).add(window.scrollX,window.scrollY),n=this.getTarget(s,this.ctx);n&&(n.fire(new Ot(e,n,s,t)),i[e]instanceof Function&&i[e](n,s,t))}}),{passive:!1})}));const n={[St.events.down]:null,[St.events.up]:null};Object.keys(n).forEach((t=>{window.document.addEventListener(t,(e=>{this.options.shown&&(this.fire(new St(t,this,e)),n[t]instanceof Function&&n[t](e))}))}))};let Rt=null;const zt=[],Mt=()=>Rt,Ct=(t,e=!0)=>(Rt&&Rt.hide().stopLoop(),e&&zt.push(Rt),t.show().startLoop(),Rt=t,t),At=()=>Ct(zt.pop(),!1),Nt=(t,e=window.document.body)=>{let s=e;s instanceof window.HTMLCanvasElement||(({canvas:s}=Et.getDrawingContext(e)),e.appendChild(s));const i=Object.keys(t),n={};return i.forEach((e=>{const i=new Et(s);t[e](i),n[e]=i,i.hide(),i.on(Et.events.change,(t=>Ct(n[t.target])))})),Ct(n[i[0]]),n};class Pt extends ft{constructor(t,e,s,i,n){super(t,{...e.options,...n}),this.base=e,this.generator=s,this.updater=i,this.data=[]}generate(t,...e){return this.data=this.data.concat([...new Array(t)].map(((t,s)=>{const i={...Pt.defaultData,...this.generator?this.generator(s,...e):{}};return i.position=v.from(i.position),i}))),this}trace(t){const e=new window.Path2D;this.base.trace(e);const s=new window.DOMMatrix,{cos:i,sin:n}=Math;if(this.data=this.data.filter(((r,o)=>{this.updater&&this.updater(r,o);const{position:a,scale:h=1,rotation:l=0,ttl:u}=r,d="number"==typeof h?[h,h]:v.from(h).toJSON(),p=l*c;return s.a=i(p)*d[0],s.b=n(p)*d[0],s.c=-n(p)*d[1],s.d=i(p)*d[1],s.e=a.x,s.f=a.y,t.addPath(e,s),!u||--r.ttl>0})),this.options.emit&&h()<this.options.frequency){const t=Array.isArray(this.options.emit)?h(...this.options.emit):this.options.emit;this.generate(Math.floor(t),...this.options.args)}return this}isHover(){return!1}toJSON(){const{base:t,data:e}=this;return{...super.toJSON(),base:t,data:e}}static from(t){const e=from(t.base),s=new Pt(t.position,e,0);return s.data=t.data,s}static get defaultOptions(){return{...super.defaultOptions,frequency:1,emit:null,args:[]}}static get defaultData(){return{position:new v}}}class Tt extends ft{constructor(t,e,s){super(t,s),this.points=e.map(v.from)}trace(t){t.moveTo(0,0);const{x:e=0,y:s=0}=this.options.absolute?this.position:{};return this.points.forEach((i=>t.lineTo(i.x-e,i.y-s))),this}toJSON(){const{points:t}=this;return{...super.toJSON(),points:t}}static from(t){return new Tt(t.position,t.points,t.options)}static get defaultOptions(){return{...super.defaultOptions,cap:Tt.caps.round,join:Tt.joins.round,fill:null,stroke:super.defaultOptions.fill,absolute:!1}}static get caps(){return{butt:"butt",round:"round",square:"square"}}}class Lt extends ft{constructor(t,e=0,s=0,i=0,n=.5,r){super(t,r),this.width=e,this.height=s,this.startAngle=i,this.endAngle=n}trace(t){const e=(this.startAngle+-.25)*c,s=(this.endAngle+-.25)*c;return t.ellipse(0,0,this.width,this.height,0,e,s),this}toJSON(){const{width:t,height:e,startAngle:s,endAngle:i}=this;return{...super.toJSON(),width:t,height:e,startAngle:s,endAngle:i}}static from(t){return new Lt(t.position,t.width,t.height,t.startAngle,t.endAngle,t.options)}static get defaultOptions(){return Tt.defaultOptions}static get caps(){return Tt.caps}}class Ht extends Lt{constructor(t,e,s,i,n){super(t,e,e,s,i,n)}trace(t){return t.moveTo(0,0),super.trace(t)}get radius(){return this.width}set radius(t){this.width=t,this.height=t}toJSON(){const{radius:t}=this,e={...super.toJSON(),radius:t};return delete e.width,delete e.height,e}static get defaultOptions(){return ft.defaultOptions}}class It extends Lt{constructor(t,e,s,i){super(t,e,s,0,1,i)}toJSON(){const t=super.toJSON();return delete t.startAngle,delete t.endAngle,t}static from(t){return new It(t.position,t.width,t.height,t.options)}static get defaultOptions(){return ft.defaultOptions}}class jt extends It{constructor(t,e,s){super(t,e,e,s)}get radius(){return this.width}set radius(t){this.width=t,this.height=t}trace(t){return t.arc(0,0,this.radius,0,c),this}toJSON(){const{radius:t}=this,e={...super.toJSON(),radius:t};return delete e.width,delete e.height,e}static from(t){return new jt(t.position,t.radius,t.options)}}class Dt extends Tt{constructor(t,e,s=Dt.defaultTension,i){super(t,e,i),this.tension=s}trace(t){if(1===this.points.length||a(this.tension,0))super.trace(t);else{t.moveTo(0,0);const e=this.options.absolute?this.position:new v;Dt.splineThrough(t,[new v,...this.points],this.tension,e)}return this}toJSON(){const{tension:t}=this;return{...super.toJSON(),tension:t}}static from(t){return new Dt(t.position,t.points,t.tension,t.options)}static get defaultTension(){return.2}static splineThrough(t,e,s=Dt.defaultTension,i){if(e.length<2)throw new RangeError(`Need at least 2 points to spline, but only ${e.length} given.`);const n=v.from(i);if(2===e.length){const s=v.from(e[1]);return void t.lineTo(s.x-n.x,s.y-n.y)}const r=e.map((t=>v.from(t).clone().subtract(n)));for(let e=1;e<r.length;++e){const i=[...new Array(4)].map(((t,s)=>r[e+s-2])),[n,o]=Jt(i,s);t.bezierCurveTo(n.x,n.y,o.x,o.y,r[e].x,r[e].y)}}}function Jt(t,e=Dt.defaultTension){const[s,i,n,r]=t;let o,a;return s&&(o=n.clone().subtract(s).multiply(e)),r&&(a=i.clone().subtract(r).multiply(e)),[t[1].clone().add(o),t[2].clone().add(a)]}class $t extends ft{constructor(t,e=[],s){if(e.length<3)throw new RangeError(`A polygon can't have less than 3 vertices, but only ${e.length} given.`);super(t,s),this.points=e.map((t=>v.from(t)))}trace(t){return this.points.concat(...this.points.slice(0,2)).forEach((e=>t.lineTo(e.x,e.y))),this}toJSON(){const{points:t}=this;return{...super.toJSON(),points:t}}static from(t){return new $t(t.position,t.points,t.options)}}const Gt=Symbol("_radius");class qt extends $t{constructor(t,e,s=0,i){super(t,qt.getRotatingPoints(e,s),i),this[Gt]=s}set radius(t){const e=qt.getRotatingPoints(this.points.length,t);this.points.forEach(((t,s)=>t.set(e[s]))),this[Gt]=t}get radius(){return this[Gt]}toJSON(){const{points:t,radius:e}=this,s={...super.toJSON(),nbSides:t.length,radius:e};return delete s.points,s}static from(t){return new qt(t.position,t.nbSides,t.radius,t.options)}static getRotatingPoints(t,e,s=0,i){const n=s-1/4,r=[];for(let s=0;s<t;++s){const o=(s/t+n)*c,a=new v(Math.cos(o)*e,Math.sin(o)*e);r.push(a.add(i))}return r}}class Bt extends qt{constructor(t,e,s){super(t,3,e,s)}toJSON(){const t=super.toJSON();return delete t.nbSides,t}static from(t){return new Bt(t.position,t.radius,t.options)}}const Ft=Symbol("_bevelKey");class _t extends qt{constructor(t,e=5,s,i=.5,n){super(t,2*e,s,n),this[Ft]=i,this.radius=s}get nbBranches(){return this.points.length/2}set nbBranches(t){this.points=qt.getRotatingPoints(2*t,this.radius),this.rebuild()}get radius(){return super.radius}set radius(t){super.radius=t,this.rebuild()}get bevelRatio(){return this[Ft]}set bevelRatio(t){this[Ft]=t,this.rebuild()}rebuild(){const t=this.radius*this.bevelRatio,e=qt.getRotatingPoints(this.nbBranches,t,.5/this.nbBranches);this.points.forEach(((t,s)=>{s%2&&t.set(e[(s-1)/2])}))}toJSON(){const{bevelRatio:t}=this,e={...super.toJSON(),bevelRatio:t};return e.nbBranches=e.nbSides/2,delete e.nbSides,e}static from(t){return new _t(t.position,t.nbBranches,t.radius,t.bevelRatio,t.options)}}const Ut=Symbol("_width"),Wt=Symbol("_height");class Vt extends gt{constructor(t,e,s){super(t,e,e,s)}set size(t){this[Ut]=t,this[Wt]=t}get size(){return this.width}set width(t){this.size=t}get width(){return this[Ut]}set height(t){this.size=t}get height(){return this[Wt]}toJSON(){const{size:t}=this,e={...super.toJSON(),size:t};return delete e.height,delete e.width,e}static from(t){return new Vt(t.position,t.size,t.options)}}function Yt(t){return Array.isArray(t)?t.reduce(((t,e)=>t.concat(Yt(e))),[]):t.toString().split("\n")}const Xt=(()=>{let t;const e={};return(s,i)=>{const n=Yt(s),r=(({lineHeight:t,bold:e,italic:s,fontSize:i,font:n})=>({lineHeight:t,bold:e,italic:s,fontSize:i,font:n}))({...Zt.defaultOptions,...i}),o=`${n.join("\n")}${JSON.stringify(r)}`;if(void 0!==e[o])return e[o];t||(t=document.createElement("canvas").getContext("2d")),t.font=Zt.getFontDefinition(r);const a=r.fontSize*r.lineHeight*n.length,h={width:n.reduce(((e,s)=>Math.max(e,t.measureText(s).width)),0),height:a};return e[o]=h,h}})();class Zt extends gt{constructor(t,e="",s){super(t,void 0,void 0,s),this.lines=[],this.text=e;const i=new mt(mt.events.ready,this);/^(\w+:)?\/\//.test(this.options.font)?Zt.load(this.options.font).then((t=>{this.options.font=t,this.fire(i)})):this.fire(i)}get text(){return this.lines.join("\n")}set text(t){this.lines=Yt(t)}makePath(t){const{options:e}=this;if(this.text.length&&(this.willFill||this.willStroke)){const s=this.getOrigin();t.translate(s.x,s.y);const i=Zt.measure("M",this.options).height,n=i/e.lineHeight,r=n*((e.lineHeight-1)/2);e.underscore&&t.beginPath();const o=this.getAlignOffset();t.translate(o*this.width,0),this.lines.forEach(((s,a)=>{const h=a*i+r;if(this.willFill&&t.fillText(s,0,h),this.willStroke&&t.strokeText(s,0,h),e.underscore){const{width:i}=Zt.measure(s,e),r=o*i;t.moveTo(-r,h+n),t.lineTo(i-r,h+n)}})),e.underscore&&(t.lineWidth=n*(e.bold?.07:.05),t.strokeStyle=(this.willStroke&&e.stroke||e.fill).toString(t),t.stroke(),t.closePath()),t.translate(-s.x,-s.y)}return this}setContext(t){return super.setContext(t),(this.willFill||this.willStroke)&&(t.font=Zt.getFontDefinition(this.options),t.textAlign=this.options.align,t.textBaseline="top"),this}getAlignOffset(){const{align:t}=this.options;let e=0;if(t===Zt.alignments.center)e=.5;else if(t===Zt.alignments.right)e=1;else if(t===Zt.alignments.start||t===Zt.alignments.end){const i=this.getRoot();if(i.isScene){const n=(s=i.ctx.canvas,document.defaultView.getComputedStyle(s||document.body).direction);(t===Zt.alignments.start&&"rtl"===n||t===Zt.alignments.end&&"ltr"===n)&&(e=1)}}var s;return e}getMeasures(){return Zt.measure(this.text,this.options)}get width(){return this.getMeasures().width}set width(t){}get height(){return this.getMeasures().height}set height(t){}toJSON(){const{text:t}=this;return{...super.toJSON(),text:t}}static from(t){return new Zt(t.position,t.text,t.options)}static load(t){if(Array.isArray(t))return Promise.all(t.map((t=>Zt.load(t))));const e=t.replace(/\W/g,"-"),s=new window.FontFace(e,`url(${t})`);return window.document.fonts.add(s),s.load().then((()=>e))}static getFontDefinition(t){return`${t.bold?"bold ":""}${t.italic?"italic ":""}${t.fontSize}px ${t.font}`}static measure(t,e){return Xt(t,e)}static get defaultOptions(){return{...super.defaultOptions,font:"sans-serif",fontSize:20,align:Zt.alignments.start,bold:!1,italic:!1,underscore:!1,lineHeight:1}}static get alignments(){return{left:"left",right:"right",center:"center",start:"start",end:"end"}}}class Kt{constructor(t,e){this.action=t,this.target=v.from(e)}execute(t,e){return this.action.call(this,t,this.target,e),this.target}toJSON(){throw new ReferenceError("Unimplemented toJSON function in Path's Instruction")}static from(){throw new ReferenceError("Unimplemented from function in Instruction")}}class Qt extends ft{constructor(t,e,s=!0,i){super(t,i),s||(this.options=new Tt(this.position,[],i).options),this.instructions=e,this.isClosed=s,this.closing=Qt.lineTo(new v)}trace(t){let e=new v;const s=this.instructions.slice();if(Array.isArray(s)){if(this.isClosed){const i=this.instructions[this.instructions.length-1].target;t.moveTo(i.x,i.y),s.unshift(this.closing),s.push(this.closing),e=i}else t.moveTo(0,0);s.forEach((s=>e=s.execute(t,e)))}else if("string"==typeof s){const e=new window.Path2D(`M0 0 ${s}${this.isClosed?" Z":""}`);t.addPath(e)}return this}isHover(t,e){return super.isHover(t,e)}toJSON(){const{instructions:t,isClosed:e}=this;return{...super.toJSON(),instructions:t,isClosed:e}}static from(t){const e=Array.isArray(t.instructions)?t.instructions.map((t=>Kt.from(t))):void 0;return new Qt(t.position,e,t.isClosed,t.options)}static lineTo(t){return new Kt(((t,e)=>t.lineTo(e.x,e.y)),t)}static moveTo(t){return new Kt(((t,e)=>t.moveTo(e.x,e.y)),t)}static quarterTo(t,e){return Qt.arcTo(t,.25,4/3*(Math.sqrt(2)-1),e)}static halfTo(t,e){return Qt.arcTo(t,.5,4/3,e)}static arcTo(t,e,s,i=!0){return new Kt(((t,n,r)=>{const o=n.distance(r),a=o/2,h=e/2*(i?1:-1),l=n.clone().subtract(r).rotate(-h).divide(o).multiply(s*a).add(r),c=r.clone().subtract(n).rotate(h).divide(o).multiply(s*a).add(n);Qt.bezierTo(n,l,c).execute(t,r)}),t)}static quadTo(t,e){const s=v.from(e);return new Kt(((t,e)=>{t.quadraticCurveTo(s.x,s.y,e.x,e.y)}),t)}static bezierTo(t,e,s){const i=v.from(e),n=v.from(s);return new Kt(((t,e)=>{t.bezierCurveTo(i.x,i.y,n.x,n.y,e.x,e.y)}),t)}static splineThrough(t,e){const s=t[t.length-1];return new Kt(((s,i,n)=>{Dt.splineThrough(s,[n,...t],e)}),s)}static waveTo(t,e){throw new ReferenceError("This function has yet to be implemented.")}static sinTo(t,e,s){throw new ReferenceError("This function has yet to be implemented.")}}class te extends ft{constructor(t,e,s){super(t,s),this.radius=e}trace(t){t.moveTo(0,-.4*this.radius);const e=[[-.4,-.9,-1,-.6,-1,0],[-1,.4,-.6,.6,0,1],[.6,.6,1,.4,1,0],[1,-.6,.4,-.9,0,-.4]];return e.concat(e.slice(0,1)).forEach((e=>t.bezierCurveTo(...e.map((t=>t*this.radius))))),this}toJSON(){const{radius:t}=this;return{...super.toJSON(),radius:t}}static from(t){return new te(t.position,t.radius,t.options)}}var ee=s(27);class se extends vt{constructor(t,e,s,i){super(t,e,i),this.frames=s,this.frame=0,this.isPaused=!1}makePath(t){const{sourceSize:e}=this.frames[Math.floor(this.frame)];if(this.width=e.w,this.height=e.h,super.makePath(t),this.isLoaded){const t=Math.floor(this.frame);!this.isPaused&&(this.options.loop||this.frame<this.frames.length-1)&&this.setFrame(this.frame+this.options.speed);const e=Math.floor(this.frame);e!==t&&(this.fire(new k(se.events.frame,this)),this.options.loop||e!==this.frames.length-1||this.fire(new k(se.events.end,this)))}return this}draw(t){const{frame:e,spriteSourceSize:s}=this.frames[Math.floor(this.frame)];return t.drawImage(this.file,e.x,e.y,e.w,e.h,s.x,s.y,s.w,s.h),this}play(t){return this.isPaused=!1,void 0!==t&&(this.options.speed=t),this}pause(){return this.isPaused=!0,this}setFrame(t){return this.frame=p(t,this.frames.length),this}toJSON(){const{frames:t,frame:e,isPaused:s}=this;return{...super.toJSON(),frames:t,frame:e,isPaused:s}}static from(t){const{position:e,url:s,frames:i,frame:n,isPaused:r,options:o}=t,a=new se(e,s,i,o);return a.setFrame(n),r&&a.pause(),a}static async sheet(t){const e=await window.fetch(t),s=await e.json();return s.meta.file=await this.load(s.meta.image),new ie(s)}static get defaultOptions(){return{...super.defaultOptions,speed:1,loop:!0}}static get events(){return{...super.events,start:"sprite-start",frame:"sprite-frame",end:"sprite-end"}}}class ie{constructor(t){this.json=t}get file(){return this.json.meta.file}get(t="*"){const e=(t=>{if("function"==typeof t)return t;if("string"==typeof t){const e=new ee.Minimatch(t,{dot:!0,matchBase:!0});return s=>t===s||e.match(s)}return t instanceof RegExp?e=>t.test(e):()=>!1})(t),{frames:s}=this.json;return Object.keys(s).filter(e).map((t=>s[t]))}extract(t,e,s){return new se(t,this.file,this.get(e),s)}}class ne extends ft{constructor(t,e,s){let i;super(t,s),this.base=e,this.on(Ot.events.hover,(()=>{i=i||this.options.fill,this.options.fill=this.options.hover})).on(Ot.events.leave,(()=>{this.options.fill=i,i=null})).on(Ot.events.click,(t=>{this.click(t.position.clone().subtract(this.getAbsolutePosition()))})),this.on(ft.events.attach,(()=>this.value=this.options.value),!0)}trace(t){return this.base.prototype.trace.call(this,t)}getOrigin(){return this.base.prototype.getOrigin.call(this)}get value(){throw new ReferenceError(`Unimplemented get value function in ${this.constructor.name}`)}set value(t){throw new ReferenceError(`Unimplemented set value function in ${this.constructor.name}`)}click(){this.fire(new k(ne.events.change,this))}toJSON(){const t=super.toJSON();return t.options=t.options||{},t.options.value=this.value,t}static from(t){return new this(t.position,t.options)}static get defaultOptions(){return{...super.defaultOptions,value:null,foreground:"#444",fill:"#f6f6f6",stroke:"#aaa",hover:"#dcdcdc",cursor:ft.cursors.pointer}}static get events(){return{...super.events,change:"change"}}}class re extends ne{constructor(t,e){super(t,gt,e),this.text=new Zt(void 0,this.options.value,{fill:this.options.foreground,cursor:this.options.cursor,font:this.options.font,fontSize:this.options.fontSize,align:this.options.align,bold:this.options.bold,italic:this.options.italic,underscore:this.options.underscore,lineHeight:this.options.lineHeight}),this.add(this.text)}get size(){const t=this.text.getMeasures(),e=Zt.measure("M",this.text.options).height*re.MARGIN;return{width:t.width+4*e,height:t.height+2*e}}get width(){return this.size.width}get height(){return this.size.height}click(){}get value(){return this.text.text}set value(t){this.text.text=t;const e=Zt.measure("M",this.text.options).height*re.MARGIN;this.text.position.set(this.getOrigin()).add(2*e,e)}static get defaultOptions(){return{...Zt.defaultOptions,...super.defaultOptions,value:""}}static get MARGIN(){return.2}}class oe extends ne{constructor(t,e){super(t,Vt,e);const s=this.options.size*oe.MARGIN;this.fill=new Vt([s,s],this.options.size-2*s,{fill:this.options.foreground,shown:this.options.value,cursor:this.options.cursor,origin:this.getOrigin()}),this.add(this.fill)}get width(){return this.options.size}set width(t){this.options.size=t}get height(){return this.options.size}set height(t){this.options.size=t}click(){this.toggle(),super.click()}toggle(t=!this.value){return this.value=t,t}get value(){return this.fill.options.shown}set value(t){t?this.fill.show():this.fill.hide()}static get defaultOptions(){return{...super.defaultOptions,size:20,value:!1}}static get MARGIN(){return.2}}const ae=Symbol("_selected");class he extends ne{constructor(t,e,s){if(!e.length)throw new RangeError("Options list should have at least one item.");super(t,gt,s),this[ae]=0;const i={cursor:ft.cursors.pointer,fill:this.options.foreground,font:this.options.font,fontSize:this.options.fontSize,align:this.options.align,bold:this.options.bold,italic:this.options.italic,underscore:this.options.underscore,lineHeight:this.options.lineHeight},n=Zt.measure("M",i).height*he.MARGIN;this.display=new Zt(void 0,"",i),this.optionsList=e.map((t=>new Zt([2*n-1,n],t||"",i)));const r=Math.max(...this.optionsList.map((t=>t.width)));i.origin=[r*this.display.getAlignOffset(),0],this.optionsContainer=new gt(void 0,this.width,0,{fill:this.options.fill,stroke:this.options.stroke,strokeWidth:this.options.strokeWidth}),this.optionsContainer.hide();let o=0;this.optionsList.forEach(((t,e)=>{const s=new gt([1,o+1],r+6*n-2,t.height+2*n,{fill:this.options.fill,cursor:ft.cursors.pointer});let i;o+=s.height,s.on(Ot.events.hover,(()=>{i=i||s.options.fill,s.options.fill=this.options.hover})).on(Ot.events.leave,(()=>{s.options.fill=i,i=null})).on(Ot.events.click,(t=>{t.stop(),this.value=e,this.fire(new k(he.events.change,this))})),s.add(t),this.optionsContainer.add(s)})),this.optionsContainer.height=o+2,this.arrow=new Bt([r+4*n,this.height/2],n,{fill:this.options.foreground,rotation:.5,cursor:ft.cursors.pointer}),this.add(this.display,this.optionsContainer,this.arrow)}get size(){const t=this.optionsList[this.value].getMeasures(),e=Math.max(...this.optionsList.map((t=>t.width))),s=Zt.measure("M",this.optionsList[this.value].options).height*he.MARGIN;return{width:e+6*s,height:t.height+2*s}}get width(){return this.size.width}get height(){return this.size.height}get value(){return this[ae]}set value(t){this[ae]=o(t,0,this.optionsList.length-1),this.display.text=this.optionsList[this.value].text;const e=this.optionsList[0].height*he.MARGIN,s=this.getOrigin();this.display.options.origin.set(s.clone().add(2*e,e)),this.arrow.options.origin.set(s.clone().multiply(-1)),this.optionsContainer.hide(),this.isHovered&&this.fire(new Ot(Ot.events.leave,this))}click(){const{position:t}=this.optionsList[this.value].parent;this.optionsContainer.position.set(this.getOrigin()).subtract(t).add(1,0),this.optionsContainer.show()}toJSON(){const t=super.toJSON();return t.values=this.optionsList.map((t=>t.text)),t}static from(t){return new he(t.position,t.values,t.options)}static get defaultOptions(){return{...Zt.defaultOptions,...super.defaultOptions,value:0}}static get MARGIN(){return.2}}ft.prototype.draggable=function(t){if(this.isRotatable)throw new Error("Component can't be both rotatable and draggable.");const e=this.options.cursor===ft.cursors.default;e&&(this.options.cursor=ft.cursors.grab),this.isDraggable=!0,this.isDragged=!1;const s={x:!0,y:!0,...t};s.constrain&&(s.constrain=S.from(s.constrain));let i=null,n=null;const r=({position:t})=>{e&&(this.options.cursor=ft.cursors.grabbing),i=t,n=this.position.clone(),this.isDragged=!0,this.fire(new Ot(Ot.events.grab,this,this.position.clone()))};this.on(Ot.events.down,r,!0);const o=t=>{if(this.isDragged&&i){const e=t.position.clone().subtract(i),r=n.clone().add(s.x&&e.x,s.y&&e.y);this.position.set(r),s.constrain&&this.position.constrain(s.constrain.start,s.constrain.end),this.fire(new Ot(Ot.events.drag,this,this.position.clone()))}},a=()=>{e&&(this.options.cursor=ft.cursors.grab),this.isDragged&&i&&(i=null,this.isDragged=!1,this.fire(new Ot(Ot.events.drop,this,this.position.clone())))};let h;return this.getScene().then((t=>{this.isDraggable&&(h=t,h.on(Ot.events.move,o).on(Ot.events.up,a))})),{set x(t){s.x=t},set y(t){s.y=t},set constrain(t){s.constrain=t?S.from(t):t},stop:()=>{this.removeListener(Ot.events.down,r),h&&h.removeListener(Ot.events.move,o).removeListener(Ot.events.up,a),e&&(this.options.cursor=ft.cursors.default),this.isDraggable=!1,this.isDragged=!1}}};const le=Symbol("_constrainer"),ce=Symbol("_moveHandle");class ue extends ne{constructor(t,e){super(t,gt,e);const s=(this.height-2)/2;this.handle=new jt([0,this.height/2],s,{fill:this.options.foreground,cursor:gt.cursors.ewResize,origin:this.getOrigin()}),this.add(this.handle),this[le]=new S([s+1,this.height/2],[this.width-s-1,this.height/2]),this.handle.draggable({constrain:this[le]}),this.handle.on(Ot.events.drag,(()=>this.fire(new k(ue.events.change,this))),!0)}click(t){const e=this.getOrigin();this.handle.position.set(t.x-e.x,0).constrain(this[le].start,this[le].end),super.click()}set width(t){if(t<ue.HEIGHT)throw new RangeError(`Slider is too small, minimum is ${ue.HEIGHT}px.`);this.options.width=t,this[le].end=new v(this.width-ue.HEIGHT,0),this[ce](this.value)}get width(){return this.options.width}get height(){return ue.HEIGHT}get value(){const{min:t,max:e}=this.options,{start:s,end:i}=this[le];return w(this.handle.position.x,s.x,i.x,t,e)}set value(t){this[ce](o(t,this.options.min,this.options.max))}static get defaultOptions(){return{...super.defaultOptions,min:0,max:1,value:0,width:200}}static get HEIGHT(){return 20}}ue.prototype[ce]=function(t){const{min:e,max:s}=this.options,{start:i,end:n}=this[le];this.handle.position.x=w(t,e,s,i.x,n.x)};const de=Symbol("_value");class pe extends ne{constructor(t,e){super(t,gt,e),this.removeListener([Ot.events.hover,Ot.events.leave,Ot.events.click]),this.progress=new gt([1,1],0,pe.HEIGHT-2,{fill:this.options.foreground,origin:this.getOrigin()}),this.add(this.progress),this.options.speed<1&&this.progress.on(pe.events.draw,(()=>{const t=(this.width-2)*this.value;this.progress.width+=(t-this.progress.width)*this.options.speed**2}),!0),this[de]=null}click(){}get width(){return this.options.width}set width(t){if(t<pe.HEIGHT)throw new RangeError(`Progress-bar is too small, minimum is ${pe.HEIGHT}px.`);this.options.width=t}get height(){return pe.HEIGHT}get value(){return this[de]}set value(t){this[de]=o(t,0,1),this.options.speed>=1&&(this.progress.width=(this.width-2)*this.value)}static get defaultOptions(){return{...super.defaultOptions,cursor:null,value:0,width:200,speed:.3}}static get HEIGHT(){return 20}}const fe=Symbol("_value");class ge extends ne{constructor(t,e){super(t,jt,e),this.removeListener([Ot.events.hover,Ot.events.leave,Ot.events.click]),this.progress=new Ht(this.getOrigin(),this.radius-this.options.strokeWidth/2,0,0,{fill:this.options.foreground}),this.add(this.progress),this.options.speed<1&&this.progress.on(ge.events.draw,(()=>{this.progress.endAngle+=(this.value-this.progress.endAngle)*this.options.speed**2}),!0),this[fe]=null}click(){}get radius(){return this.options.radius}set radius(t){this.options.radius=t,this.progress.radius=t-1}get value(){return this[fe]}set value(t){this[fe]=o(t,0,1),this.options.speed>=1&&(this.progress.endAngle=this.value)}static get defaultOptions(){return{...super.defaultOptions,cursor:null,value:0,radius:100,speed:.3}}}ft.prototype.rotatable=function(){if(this.isDraggable)throw new Error("Component can't be both draggable and rotatable.");const t=this.options.cursor===ft.cursors.default;t&&(this.options.cursor=ft.cursors.grab),this.isRotatable=!0,this.isRotated=!1;let e=null,s=null;const i=({position:i})=>{t&&(this.options.cursor=ft.cursors.grabbing),e=this.options.rotation,s=i.subtract(this.getAbsolutePosition()).angle,this.isRotated=!0,this.fire(new Ot(Ot.events.grab,this,i))};this.on(Ot.events.down,i);const n=({position:t})=>{if(null!==e){const i=this.getAbsolutePosition();this.options.rotation=e+t.subtract(i).angle-s,this.fire(new Ot(Ot.events.rotate,this,t))}},r=({position:i})=>{t&&(this.options.cursor=ft.cursors.grab),null!==e&&this.isRotated&&(e=null,s=null,this.isRotated=!1,this.fire(new Ot(Ot.events.drop,this,i)))};let o;return this.getScene().then((t=>{this.isRotatable&&(o=t,o.on(Ot.events.move,n).on(Ot.events.up,r))})),{stop:()=>{this.removeListener(Ot.events.down,i,!0),o&&o.removeListener(Ot.events.move,n).removeListener(Ot.events.up,r),t&&(this.options.cursor=ft.cursors.default),this.isRotatable=!1,this.isRotated=!1}}};class me extends ne{constructor(t,e){super(t,jt,e);const s=this.getOrigin();this.options.rotationCenter=s;const i=this.options.radius*me.NOTCH_SIZE,n=this.options.radius/3,r=new Tt([0,-n],[[0,-this.options.radius+n+i]],{stroke:this.options.foreground,strokeWidth:i,cursor:ft.cursors.grab,origin:s});this.add(r).on(Ot.events.rotate,(()=>this.fire(new k(me.events.change,this))),!0).rotatable()}get radius(){return this.options.radius}set radius(t){this.options.radius=t}click(){}get value(){return w(p(this.options.rotation,1),0,1,this.options.min,this.options.max)}set value(t){this.options.rotation=p(w(t,this.options.min,this.options.max,0,1),1)}static get defaultOptions(){return{...super.defaultOptions,cursor:ft.cursors.default,min:0,max:1,value:0,radius:100}}static get NOTCH_SIZE(){return.09}}gt.prototype.resizable=function(t){if(this.options.rotation%1!=0)throw new EvalError("Resizable don't support rotation.");const e=this.getOrigin();if(0!==e.x||0!==e.y)throw new EvalError("Resizable don't support other origin than [0, 0] or topLeft.");this.isResizable=!0;const s={x:!0,y:!0,handle:new $t([this.width,this.height],[[0,0],[-15,0],[0,-15]],{fill:"gold",cursor:ft.cursors.seResize}),...t};if((!s.x||!s.y)&&this instanceof Vt)throw new TypeError("Square should be resizable in both x and y axis.");this.add(s.handle);const i=s.handle.position.clone().multiply(-1).add(this.width,this.height),n=s.handle.draggable(s);return s.handle.on(Ot.events.drag,(()=>{this instanceof Vt?(s.handle.position.add(i),this.size=(s.handle.position.x+s.handle.position.y)/2,s.handle.position.set(this.size).subtract(i)):(s.x&&(this.width=s.handle.position.x+i.x),s.y&&(this.height=s.handle.position.y+i.y)),this.fire(new Ot(Ot.events.resize,this,s.handle.position))}),!0),n};const we=JSON.parse('{"rE":"3.2.0","cy":"Guillaume Martigny <guillaume.martigny@gmail.com> (https://www.guillaume-martigny.fr)","TB":"https://pencil.js.org/"}'),{rE:be,cy:ve,TB:ye}=we,xe={Container:R,Particles:Pt,OffScreenCanvas:z,Scene:Et,Arc:Lt,Pie:Ht,Ellipse:It,Circle:jt,Line:Tt,Spline:Dt,Polygon:$t,RegularPolygon:qt,Triangle:Bt,Star:_t,Rectangle:gt,Square:Vt,Image:vt,Text:Zt,Path:Qt,Position:v,Vector:S,Select:he,Slider:ue,Checkbox:oe,Button:re,ProgressBar:pe,ProgressPie:ge,Knob:me,Color:ct,LinearGradient:ut,RadialGradient:dt,ConicGradient:pt,Pattern:xt,Heart:te,Sprite:se};function Se(t){const e=xe[t.constructor].from(t);return t.children&&e.add(...t.children.map((t=>Se(t)))),e}const Oe={EventEmitter:O,Component:ft,Input:ne,BaseEvent:k,MouseEvent:Ot,NetworkEvent:mt,KeyboardEvent:St,from:Se,Math:n,Navigation:r,version:be,author:ve,homepage:ye,...xe},ke=[];function Ee({name:t,install:e},s){if(!t)throw new Error("You're trying to install a nameless plugin.");if(ke.includes(t))throw new Error(`The plugin "${t}" is already installed.`);return e(Oe,s),ke.push(t),Oe}Oe.use=Ee;const Re=Oe;var ze=i.l5,Me=i.eI,Ce=i.$n,Ae=i.Sc,Ne=i.jl,Pe=i.Q1,Te=i.uA,Le=i.tr,He=i.mc,Ie=i.Pp,je=i.bk,De=i.B1,Je=i._V,$e=i.pd,Ge=i.kV,qe=i.N6,Be=i.N1,Fe=i.W4,_e=i.zU,Ue=i.Cm,We=i.Vx,Ve=i.jo,Ye=i.aL,Xe=i.um,Ze=i.wA,Ke=i.Fq,Qe=i.tS,ts=i.yX,es=i.z2,ss=i.cd,is=i.Ey,ns=i.M_,rs=i.Rp,os=i.Z5,as=i.l6,hs=i.Ap,ls=i.eG,cs=i.kx,us=i.M6,ds=i.FE,ps=i.EY,fs=i.lM,gs=i.Mi,ms=i.cy,ws=i.Ay,bs=i.HT,vs=i.TB,ys=i.Yx,xs=i.rE;export{ze as Arc,Me as BaseEvent,Ce as Button,Ae as Checkbox,Ne as Circle,Pe as Color,Te as Component,Le as ConicGradient,He as Container,Ie as Ellipse,je as EventEmitter,De as Heart,Je as Image,$e as Input,Ge as KeyboardEvent,qe as Knob,Be as Line,Fe as LinearGradient,_e as Math,Ue as MouseEvent,We as Navigation,Ve as NetworkEvent,Ye as OffScreenCanvas,Xe as Particles,Ze as Path,Ke as Pie,Qe as Polygon,ts as Position,es as ProgressBar,ss as ProgressPie,is as RadialGradient,ns as Rectangle,rs as RegularPolygon,os as Scene,as as Select,hs as Slider,ls as Spline,cs as Sprite,us as Square,ds as Star,ps as Text,fs as Triangle,gs as Vector,ms as author,ws as default,bs as from,vs as homepage,ys as use,xs as version};
//# sourceMappingURL=pencil.esm.js.map